<!DOCTYPE html> 
<html>
<head>
	<!-- LINKS TO THE STYLESHEETS I USED -->
	<link rel="stylesheet" type="text/css" href="style3.css">
	<title>Game</title>
	<link rel = "stylesheet" href= "https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css">

	<!-- Google Fonts -->
     <link href="https://fonts.googleapis.com/css?family=Odibee Sans" rel="stylesheet">

</head>
<body>
	<header>
    <right>
    <a href= "index.html">
    <p>Go Back</p>
    <!-- USING THE DIVISION TAG AND LINE BREAK TAG TO BRING THE 'GO BACK' FUNCTION UP. -->
 <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br> <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br> <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
</right>
  </a> 
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js" integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk" crossorigin="anonymous"></script>
	</header>
</body>

  <!-- CSS FOR THE PING PONG GAME -->
    <style>
      *{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      /*Design layout for the game*/
      body {
        height: 100vh;
        width: 100vw;
        background-image: linear-gradient(to top, #5ad3db,#748af7);
        display: flex;
        justify-content: center;
        align-items: center;
      }
      /*DEALS WITH THE AESTHETIC OF THE BALL*/
      .board {
        height: 60vh;
        width: 55vw;
        background-image: linear-gradient(to right, #374b73, #597a75);
        border-radius: 14px;
      }
      /*DEALS WITH THE AESTHETIC OF THE BALL*/
      .ball {
        height: 30px;
        width: 30px;
        border-radius: 50%;
        position: fixed;
        top: calc(50% - 15px);
        left: calc(50% - 15px);
      }
      /*This works with movement and aesthetics of the ball*/
      .ball_effect {
        height: 100%;
        width: 100%;
        border-radius: 100px;
        animation: spinBall 0.1s linear infinite;
        box-shadow: inset 0 0 18px #fff, inset 6px 0 18px violet,
          inset -6px 0 18px #0ff, inset 6px 0 30px violet, 
          inset -6px 0 30px #0ff, 0 0 18px #fff, 
          -4px 0 18px violet, 4px 0 18px #0ff;
      }
  
      @keyframes spinBall {
        100% {
          -webkit-transform: rotate(360deg);
          transform: rotate(360deg);
        }
      }
  
      .paddle {
        height: 100px;
        width: 18px;
        border-radius: 50%;
        position: fixed;
      }
  /*POSITIONING OF THE W,S PA*/
      .paddle_1 {
        top: calc(20.5vh + 65px);
        left: calc(23vw + 30px);
        box-shadow: inset 0 0 18px #fff, 
          inset -6px 0 18px #f3bad6,
          inset 6px 0 18px #0ff, inset -6px 0 30px #f3bad6, 
          inset 6px 0 30px #0ff, 0 0 18px #fff, 
          4px 0 18px #f3bad6, -4px 0 18px #0ff;
      }
  /*POSITIONING OF THE UP/DOWN PADDLE*/
      .paddle_2 {
        top: calc(80vh + 7.5vh - 100px - 55px);
        right: calc(18.5vw + 30px);
        box-shadow: inset 0 0 18px #fff, 
          inset 6px 0 18px #f3bad6,
          inset -6px 0 18px #0ff, inset 6px 0 30px #f3bad6,
          inset -6px 0 30px #0ff,
          0 0 18px #fff, -4px 0 18px #f3bad6, 4px 0 18px #0ff;
      }
      /*NUMBER SCORE FOR PLAYER1*/
      .player_1_score {
        height: 50px;
        width: 50px;
        color: #5adb92;
        position: fixed;
        left: 3ยง0vw;
        margin-top: 30px;
      }
      /*NUMBER SCORE FOR PLAYER2*/
      .player_2_score {
        height: 50px;
        width: 50px;
        color: #5adb92;
        position: fixed;
        left: 70vw;
        margin-top: 30px;
      }
  
      .message {
        position: fixed;
        /* color: #48426d; */
        height: 10vh;
        width: 30vw;
        color: #c9cbff;
        left: 38vw;
        margin: 30px auto auto auto;
      }
    </style>
</head>
  

<body>
  <div class="board">
      <div class='ball'>
        <div class="ball_effect"></div>
      </div>
      <div class="paddle_1 paddle"></div>
      <div class="paddle_2  paddle"></div>
      <h1 class = "player_1_score">0</h1>
      <h1 class="player_2_score">0</h1>
      <h1 class="message">
        Press Enter to Play Pong
      </h1>
  </div>
  <!-- JAVASCRIPT FOR PING PONG GAME -->
  <script>
    let gameState = 'start';
    let paddle_1 = document.querySelector('.paddle_1');
    let paddle_2 = document.querySelector('.paddle_2');
    let board = document.querySelector('.board');
    let initial_ball = document.querySelector('.ball');
    let ball = document.querySelector('.ball');
    let score_1 = document.querySelector('.player_1_score');
    let score_2 = document.querySelector('.player_2_score');
    let message = document.querySelector('.message');
    let paddle_1_coord = paddle_1.getBoundingClientRect();
    let paddle_2_coord = paddle_2.getBoundingClientRect();
    let initial_ball_coord = ball.getBoundingClientRect();
    let ball_coord = initial_ball_coord;
    let board_coord = board.getBoundingClientRect();
    let paddle_common = 
        document.querySelector('.paddle').getBoundingClientRect();
    // MATH OBJECT ALREADY PROVIDES THE CONSTANTS AND FUNCTION WITHOUT CREATING IT OURSELVES
    let dx = Math.floor(Math.random() * 4) + 3;
    let dy = Math.floor(Math.random() * 4) + 3;
    let dxd = Math.floor(Math.random() * 2);
    let dyd = Math.floor(Math.random() * 2);
  
    // 'ENTER' KEY FUNCTIONS
    document.addEventListener('keydown', (e) => {
      if (e.key == 'Enter') {
        gameState = gameState == 'start' ? 'play' : 'start';
        if (gameState == 'play') {
          message.innerHTML = 'Game Started';
          message.style.left = 42 + 'vw';
          // this requests the browser call a specified function to update and repeat an animation
          requestAnimationFrame(() => {
            dx = Math.floor(Math.random() * 4) + 3;
            dy = Math.floor(Math.random() * 4) + 3;
            dxd = Math.floor(Math.random() * 2);
            dyd = Math.floor(Math.random() * 2);
            moveBall(dx, dy, dxd, dyd);
          });
        }
      }
      // PLAY 'W' KEY FUNCTIONS
      if (gameState == 'play') {
        if (e.key == 'w') {
          paddle_1.style.top = Math.max(board_coord.top, paddle_1_coord.top - window.innerHeight * 0.06) + 'px';
          paddle_1_coord = paddle_1.getBoundingClientRect();
        }
        // PLAY 'S' KEY FUNCTIONS
        if (e.key == 's') {
          paddle_1.style.top =
            Math.min(board_coord.bottom - paddle_common.height,paddle_1_coord.top + window.innerHeight * 0.06) + 'px';
          paddle_1_coord = paddle_1.getBoundingClientRect();
        }
        // PLAY 'ARROW UP' KEY FUNCTIONS
        if (e.key == 'ArrowUp') {
          paddle_2.style.top =
            Math.max(board_coord.top, paddle_2_coord.top - window.innerHeight * 0.1) + 'px'; 
          paddle_2_coord = paddle_2.getBoundingClientRect();
        }
        // PLAY 'ARROW DOWN' KEY FUNCTIONS
        if (e.key == 'ArrowDown') {
          paddle_2.style.top =
            Math.min(
              board_coord.bottom - paddle_common.height,paddle_2_coord.top + window.innerHeight * 0.1) + 'px';
          paddle_2_coord = paddle_2.getBoundingClientRect();
        }
      }
    });
  // moves the ball in the up,down, left, and right
    function moveBall(dx, dy, dxd, dyd) {
      if (ball_coord.top <= board_coord.top) {
        dyd = 1;
      }
      if (ball_coord.bottom >= board_coord.bottom) {
        dyd = 0;
      }
      if (
        ball_coord.left <= paddle_1_coord.right &&
        ball_coord.top >= paddle_1_coord.top &&
        ball_coord.bottom <= paddle_1_coord.bottom
      ) {
        dxd = 1;
        dx = Math.floor(Math.random() * 4) + 3;
        dy = Math.floor(Math.random() * 4) + 3;
      }
      if (
        ball_coord.right >= paddle_2_coord.left &&
        ball_coord.top >= paddle_2_coord.top &&
        ball_coord.bottom <= paddle_2_coord.bottom
      ) {
        dxd = 0;
        dx = Math.floor(Math.random() * 4) + 3;
        dy = Math.floor(Math.random() * 4) + 3;
      }
      if (
        ball_coord.left <= board_coord.left ||
        ball_coord.right >= board_coord.right
      ) {
        if (ball_coord.left <= board_coord.left) {
          score_2.innerHTML = +score_2.innerHTML + 1;
        } else {
          score_1.innerHTML = +score_1.innerHTML + 1;
        }
        // WHEN THE GAME STARTS, THE BALL WILL MOVE ALL DIRECTIONS
        gameState = 'start';
  
        ball_coord = initial_ball_coord;
        ball.style = initial_ball.style;
        message.innerHTML = 'Press Enter to Play Pong';
        message.style.left = 38 + 'vw';
        return;
      }
      ball.style.top = ball_coord.top + dy * (dyd == 0 ? -1 : 1) + 'px';
      ball.style.left = ball_coord.left + dx * (dxd == 0 ? -1 : 1) + 'px';
      ball_coord = ball.getBoundingClientRect();
      requestAnimationFrame(() => {
        moveBall(dx, dy, dxd, dyd);
      });
      // everytime the ball hits 1 of the paddles, the speed is increased
      ball.speed += 0.5;
    }
  </script>
</body>
<center>
   <!-- USING THE DIVISION TAG AND LINE BREAK TAG TO BRING DOWN THE FOOTER TO THE BOTTOM OF THE PAGE -->
   <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
  <div></div>
  <br>
</center>
</body>
</html>